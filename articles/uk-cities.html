<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reproducing cycling potential estimates in UK cities • pct</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Reproducing cycling potential estimates in UK cities">
<meta property="og:description" content="pct">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pct</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/pct.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cycling-potential-uk.html">Cycling potential in UK cities</a>
    </li>
    <li>
      <a href="../articles/km-cycled.html">Estimating distance cycled per zone in England and Wales regions</a>
    </li>
    <li>
      <a href="../articles/pct-international.html">International application of the PCT methods</a>
    </li>
    <li>
      <a href="../articles/uk-cities.html">Reproducing cycling potential estimates in UK cities</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ITSLeeds/pct/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Reproducing cycling potential estimates in UK
cities</h1>
                        <h4 data-toc-skip class="author">Nathanael
Sheehan</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ITSLeeds/pct/blob/HEAD/vignettes/uk-cities.Rmd" class="external-link"><code>vignettes/uk-cities.Rmd</code></a></small>
      <div class="hidden name"><code>uk-cities.Rmd</code></div>

    </div>

    
    
<p>Where is cycle infrastructure most needed in UK cities? Clear answers
can fundamentally change our built environment and support national
initiatives to build a more sustainable future. With the aim of enabling
cycling uptake, the PCT project provides transport planners,
policy-makers and academics with free tools to prioritise investments
and interventions.</p>
<p>Evidence-based interventions can make streets safer for future
generations. This article demonstrates how to retrieve cycling potential
data for any UK city, down to the route network level (see the
<code>cycling-potential-uk</code> <a href="https://itsleeds.github.io/pct/articles/cycling-potential-uk.html" class="external-link">here</a>
or by running <a href="https://itsleeds.github.io/pct/articles/cycling-potential-uk.html" class="external-link"><code>vignette("cycling-potential-uk")</code></a>
in R for a tutorial showing how the package can provide cycling uptake
estimates at the area level), and how to use the results to see which
streets will have high potential. These results can help prioritise
investment in new cycleways and other interventions.</p>
<p>Set <code>eval=TRUE</code> to run this code when knitting:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html" class="external-link">opts_chunk</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>eval <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h2>
<p>The following packages must be installed and loaded to run the code
in this vignette.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://itsleeds.github.io/pct/" class="external-link">pct</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-tmap/tmap" class="external-link">tmap</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="picking-a-study-area">Picking a study area<a class="anchor" aria-label="anchor" href="#picking-a-study-area"></a>
</h2>
<div class="section level3">
<h3 id="part-a-choosing-a-region">Part A) Choosing a region<a class="anchor" aria-label="anchor" href="#part-a-choosing-a-region"></a>
</h3>
<p>Exploring study areas with PCT can be achieved by running
<code>view(pct_regions)</code> in the R console.
<code>pct_regions</code> are based on ‘regions’ from the geographic
structure for England <a href="https://www.ons.gov.uk/methodology/geography/ukgeographies/administrativegeography/england" class="external-link">(ONS)</a>.
Formerly known as Government offices for the regions or GOR’s
(established in 1994), regions reflect a number of government
departments who work with their local community to maximise prosperity
and the quality of life within their area. Northern Ireland, Scotland
and Wales were not subdivided into GOR’s but are listed with them for UK
wide statistics.</p>
<p>Based on data from the most recent census (2011), PCT provides
spatial and travel data for all 45 regions across England and Wales. To
begin with, this example will demonstrate the PCT method for the city of
Cardiff which belongs to the region of Wales.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">region_name</span> <span class="op">=</span> <span class="st">"wales"</span></span>
<span><span class="va">zones_all</span> <span class="op">=</span> <span class="fu"><a href="../reference/get_pct_zones.html">get_pct_zones</a></span><span class="op">(</span><span class="va">region_name</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="part-a-picking-a-local-authority">Part A) Picking a Local Authority<a class="anchor" aria-label="anchor" href="#part-a-picking-a-local-authority"></a>
</h3>
<p>Each region in England and Wales is composed of multiple local
authorities. Among other things, each local authority takes the lead for
local planning, housing and environmental health.</p>
<p>How do you find all the local authorities part of your region?</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">zones_all</span><span class="op">$</span><span class="va">lad_name</span><span class="op">)</span></span></code></pre></div>
<p>Aha! As we can see Wales is composed of 42 local authorities. As we
are looking at Cardiff in this example, we should declare that as our
<code>la_name</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">la_name</span> <span class="op">=</span> <span class="st">"Cardiff"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="plotting-current-cycle-uptake">Plotting Current Cycle Uptake<a class="anchor" aria-label="anchor" href="#plotting-current-cycle-uptake"></a>
</h2>
<p>Now we have chosen our region and city, we can easily plot the total
number of cyclists based on the 2011 census.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">zones</span> <span class="op">=</span> <span class="va">zones_all</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">lad_name</span> <span class="op">==</span> <span class="va">la_name</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">zones</span><span class="op">[</span><span class="st">"bicycle"</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>TaDa! The plot shows us that cycling is most prominent within the
centre of Cardiff. While this is a first step in understanding where new
cycle infrastructure is needed, it doesn’t outline the road network
where new demand is likely to occur.</p>
</div>
<div class="section level2">
<h2 id="plotting-new-demand-based-on-pct-models">Plotting New Demand Based On PCT Models<a class="anchor" aria-label="anchor" href="#plotting-new-demand-based-on-pct-models"></a>
</h2>
<p>PCT provides an easy way to get road network data for any
<code>pct_region</code>. The road network data can then be filtered to
the zones within our local authority.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rnet_all</span> <span class="op">=</span> <span class="fu">pct</span><span class="fu">::</span><span class="fu"><a href="../reference/get_pct_rnet.html">get_pct_rnet</a></span><span class="op">(</span><span class="va">region_name</span><span class="op">)</span></span>
<span><span class="va">rnet</span> <span class="op">=</span> <span class="va">rnet_all</span><span class="op">[</span><span class="va">zones</span>, <span class="op">]</span></span></code></pre></div>
<p>With our road network data fitted to our study area, we are now ready
to plot where investment should be prioritised based on a demand model.
PCT is built with numerous demand models based on varying situations
(e.g. <code>govtarget_slc</code>,<code>gendereq_slc</code> and
<code>ebike_slc</code>. In this example, we use the
<code>go dutch</code> demand model; where demand is modelled on a cycle
uptake equivalent to that in the Netherlands.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">zones</span><span class="op">$</span><span class="va">geometry</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rnet</span><span class="op">[</span><span class="st">"dutch_slc"</span><span class="op">]</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Voila! The blue lines represent the road network with colour
proportional to estimated potential based on the go dutch model. This
plot helps us understand where to prioritise cycle infrastructure and
what a new demand may look like.</p>
</div>
<div class="section level2">
<h2 id="comparing-two-cities">Comparing Two Cities<a class="anchor" aria-label="anchor" href="#comparing-two-cities"></a>
</h2>
<p>Now we have seen the ease and versatility the PCT package provides,
we can now use the method to explore more cities. Take Devon for
example, the region has two major cities Exeter and Plymouth. Both
cities obtain major universities, growing industries and have a
relatively low cycle uptake. The latter should change, and the PCT
package can provide the tools to help that.</p>
<p>We can now wrap the method we used for Cardiff into a function in
order to compare the differences between the two cities.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pct_zones_rnet</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">la_name</span>, <span class="va">region_name</span> <span class="op">=</span> <span class="st">"devon"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">zones_all</span> <span class="op">=</span> <span class="fu">pct</span><span class="fu">::</span><span class="fu"><a href="../reference/get_pct_zones.html">get_pct_zones</a></span><span class="op">(</span><span class="va">region_name</span><span class="op">)</span></span>
<span>  <span class="va">zones</span> <span class="op">=</span> <span class="va">zones_all</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">lad_name</span> <span class="op">==</span> <span class="va">la_name</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">zones</span><span class="op">[</span><span class="st">"bicycle"</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="va">rnet_all</span> <span class="op">=</span> <span class="fu">pct</span><span class="fu">::</span><span class="fu"><a href="../reference/get_pct_rnet.html">get_pct_rnet</a></span><span class="op">(</span><span class="va">region_name</span><span class="op">)</span></span>
<span>  <span class="va">rnet</span> <span class="op">=</span> <span class="va">rnet_all</span><span class="op">[</span><span class="va">zones</span>, <span class="op">]</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">zones</span><span class="op">$</span><span class="va">geometry</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rnet</span><span class="op">[</span><span class="st">"dutch_slc"</span><span class="op">]</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>zones <span class="op">=</span> <span class="va">zones</span>, rnet <span class="op">=</span> <span class="va">rnet</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">plymouth_results</span> <span class="op">=</span> <span class="fu">pct_zones_rnet</span><span class="op">(</span>la_name <span class="op">=</span> <span class="st">"Plymouth"</span><span class="op">)</span></span>
<span><span class="va">exeter_results</span> <span class="op">=</span> <span class="fu">pct_zones_rnet</span><span class="op">(</span>la_name <span class="op">=</span> <span class="st">"Exeter"</span><span class="op">)</span></span></code></pre></div>
<p>Nice! The plots indicate a spatial spread for cycling in Plymouth,
with investment necessary not only in the centre of the city. While for
Exeter the distribution remains monocentric, with investment necessary
mostly in the centre.</p>
<p>We can create side-by-side interactive maps of the route network
potential for of same cities for a more detailed comparison as
follow:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tmap_mode.html" class="external-link">tmap_mode</a></span><span class="op">(</span><span class="st">"view"</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">200</span>, <span class="fl">500</span>, <span class="fl">1000</span><span class="op">)</span></span>
<span><span class="va">m1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">plymouth_results</span><span class="op">$</span><span class="va">rnet</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_lines.html" class="external-link">tm_lines</a></span><span class="op">(</span><span class="st">"dutch_slc"</span>, breaks <span class="op">=</span> <span class="va">b</span>, palette <span class="op">=</span> <span class="st">"viridis"</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_scale_bar.html" class="external-link">tm_scale_bar</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">m2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">exeter_results</span><span class="op">$</span><span class="va">rnet</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_lines.html" class="external-link">tm_lines</a></span><span class="op">(</span><span class="st">"dutch_slc"</span>, breaks <span class="op">=</span> <span class="va">b</span>, palette <span class="op">=</span> <span class="st">"viridis"</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_scale_bar.html" class="external-link">tm_scale_bar</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tmap_arrange.html" class="external-link">tmap_arrange</a></span><span class="op">(</span><span class="va">m1</span>, <span class="va">m2</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="conclusions-and-next-steps">Conclusions and next steps<a class="anchor" aria-label="anchor" href="#conclusions-and-next-steps"></a>
</h2>
<p>As demonstrated, the PCT package provides an easy way to understand
current cycle statistics and potential cycle uptake in any UK city. The
methods used in this article can be used for planning future cycle
infrastructure and can be expanded on using the other methods part of
the PCT package. If this article is of use/interest, why not try for
your local region showing the potential based on different models. You
can also try the following resources (in R and online):</p>
<ul>
<li>Have a play with the <a href="https://www.pct.bike/" class="external-link">PCT web
application</a>
</li>
<li>For more of a deep dive into the methods, see the <a href="https://itsleeds.github.io/pct/articles/pct_training.html" class="external-link"><code>pct_training</code></a>
vignette</li>
<li>See the <a href="https://itsleeds.github.io/pct/articles/pct-international.html" class="external-link"><code>pct-international</code></a>
to see how to apply the methods internationally</li>
</ul>
<p>We’re interested to know how you’ve used the methods/data so please
get in touch.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Robin Lovelace, Layik Hama.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
